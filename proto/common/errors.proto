syntax = "proto3";

package mellivora.common;

option go_package = "github.com/mellivora-mind/mellivora-mind-studio/gen/go/common";

// Error codes for the system
enum ErrorCode {
  ERROR_CODE_UNSPECIFIED = 0;
  
  // General errors (1-99)
  ERROR_CODE_INTERNAL = 1;
  ERROR_CODE_INVALID_ARGUMENT = 2;
  ERROR_CODE_NOT_FOUND = 3;
  ERROR_CODE_ALREADY_EXISTS = 4;
  ERROR_CODE_PERMISSION_DENIED = 5;
  ERROR_CODE_UNAUTHENTICATED = 6;
  ERROR_CODE_RESOURCE_EXHAUSTED = 7;
  ERROR_CODE_FAILED_PRECONDITION = 8;
  ERROR_CODE_ABORTED = 9;
  ERROR_CODE_UNAVAILABLE = 10;
  ERROR_CODE_DEADLINE_EXCEEDED = 11;

  // Account errors (100-199)
  ERROR_CODE_ACCOUNT_NOT_FOUND = 100;
  ERROR_CODE_ACCOUNT_SUSPENDED = 101;
  ERROR_CODE_ACCOUNT_CLOSED = 102;
  ERROR_CODE_INSUFFICIENT_FUNDS = 103;
  ERROR_CODE_INSUFFICIENT_MARGIN = 104;
  ERROR_CODE_RISK_LIMIT_EXCEEDED = 105;

  // Position errors (200-299)
  ERROR_CODE_POSITION_NOT_FOUND = 200;
  ERROR_CODE_INSUFFICIENT_QUANTITY = 201;
  ERROR_CODE_POSITION_LOCKED = 202;
  ERROR_CODE_POSITION_LIMIT_EXCEEDED = 203;

  // Order errors (300-399)
  ERROR_CODE_ORDER_NOT_FOUND = 300;
  ERROR_CODE_ORDER_REJECTED = 301;
  ERROR_CODE_ORDER_CANCELLED = 302;
  ERROR_CODE_ORDER_EXPIRED = 303;
  ERROR_CODE_INVALID_ORDER_TYPE = 304;
  ERROR_CODE_INVALID_PRICE = 305;
  ERROR_CODE_INVALID_QUANTITY = 306;
  ERROR_CODE_MARKET_CLOSED = 307;
  ERROR_CODE_SECURITY_SUSPENDED = 308;
  ERROR_CODE_PRICE_LIMIT_EXCEEDED = 309;

  // Data errors (400-499)
  ERROR_CODE_DATA_NOT_AVAILABLE = 400;
  ERROR_CODE_DATA_STALE = 401;
  ERROR_CODE_DATA_SOURCE_ERROR = 402;

  // Plugin errors (500-599)
  ERROR_CODE_PLUGIN_NOT_FOUND = 500;
  ERROR_CODE_PLUGIN_LOAD_FAILED = 501;
  ERROR_CODE_PLUGIN_EXECUTION_FAILED = 502;
  ERROR_CODE_PLUGIN_TIMEOUT = 503;

  // Risk errors (600-699)
  ERROR_CODE_RISK_CHECK_FAILED = 600;
  ERROR_CODE_FACTOR_LIMIT_EXCEEDED = 601;
  ERROR_CODE_INDUSTRY_LIMIT_EXCEEDED = 602;
  ERROR_CODE_CONCENTRATION_LIMIT_EXCEEDED = 603;
  ERROR_CODE_TURNOVER_LIMIT_EXCEEDED = 604;
}

// Error detail message
message ErrorDetail {
  ErrorCode code = 1;
  string message = 2;
  map<string, string> metadata = 3;
}
